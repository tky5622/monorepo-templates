"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createApplicationFiles = void 0;
const path_1 = require("path");
const create_application_files_helpers_1 = require("./create-application-files.helpers");
const devkit_1 = require("@nrwl/devkit");
const typescript_1 = require("@nrwl/workspace/src/utilities/typescript");
function createApplicationFiles(host, options) {
    const templateVariables = Object.assign(Object.assign(Object.assign({}, (0, devkit_1.names)(options.name)), options), { tmpl: '', rootTsConfigPath: (0, typescript_1.getRelativePathToRootTsConfig)(host, options.appProjectRoot), appContent: (0, create_application_files_helpers_1.createAppJsx)(options.name), styleContent: (0, create_application_files_helpers_1.createStyleRules)(), pageStyleContent: `.page {}`, stylesExt: options.style === 'less' || options.style === 'styl'
            ? options.style
            : 'css' });
    (0, devkit_1.generateFiles)(host, (0, path_1.join)(__dirname, '../files'), options.appProjectRoot, templateVariables);
    if (options.unitTestRunner === 'none') {
        host.delete(`${options.appProjectRoot}/specs/${options.fileName}.spec.tsx`);
    }
    // SWC will be disabled if custom babelrc is provided.
    // Check for `!== false` because `create-nx-workspace` is not passing default values.
    if (options.swc !== false) {
        host.delete(`${options.appProjectRoot}/.babelrc`);
    }
    if (options.styledModule) {
        host.delete(`${options.appProjectRoot}/pages/${options.fileName}.module.${options.style}`);
    }
    if (options.style !== 'styled-components') {
        host.delete(`${options.appProjectRoot}/pages/_document.tsx`);
    }
    if (options.js) {
        host.delete(`${options.appProjectRoot}/index.d.ts`);
        (0, devkit_1.toJS)(host);
        host.delete(`${options.appProjectRoot}/next-env.d.js`);
    }
}
exports.createApplicationFiles = createApplicationFiles;
//# sourceMappingURL=create-application-files.js.map